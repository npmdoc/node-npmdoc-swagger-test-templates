<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api-documentation for
    <a
        
        href="https://github.com/apigee-127/swagger-test-templates#readme"
        
    >swagger-test-templates (v1.3.0)</a>
</h1>
<h4>Generate test code from a Swagger spec</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>
    
    <li class="apidocModuleLi"><a href="#apidoc.module.swagger-test-templates">module swagger-test-templates</a><ol>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.testGen">
            function <span class="apidocSignatureSpan">swagger-test-templates.</span>testGen
            <span class="apidocSignatureSpan">(swagger, config)</span>
            </a>
            
        </li>
        
        <li>
            
            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">swagger-test-templates.</span>helpers</span>
            
        </li>
        
    </ol></li>
    
    <li class="apidocModuleLi"><a href="#apidoc.module.swagger-test-templates.helpers">module swagger-test-templates.helpers</a><ol>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.ifCond">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>ifCond
            <span class="apidocSignatureSpan">(v1, v2, options)</span>
            </a>
            
        </li>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.is">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>is
            <span class="apidocSignatureSpan">(lvalue, rvalue, options)</span>
            </a>
            
        </li>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.length">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>length
            <span class="apidocSignatureSpan">(description)</span>
            </a>
            
        </li>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.pathify">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>pathify
            <span class="apidocSignatureSpan">(path, pathParams)</span>
            </a>
            
        </li>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.printJSON">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>printJSON
            <span class="apidocSignatureSpan">(data)</span>
            </a>
            
        </li>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.setLen">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>setLen
            <span class="apidocSignatureSpan">(descriptionLength)</span>
            </a>
            
        </li>
        
        <li>
            
            <a class="apidocElementLiA" href="#apidoc.element.swagger-test-templates.helpers.validateResponse">
            function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>validateResponse
            <span class="apidocSignatureSpan">(type, noSchema, options)</span>
            </a>
            
        </li>
        
    </ol></li>
    
</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.swagger-test-templates" id="apidoc.module.swagger-test-templates">module swagger-test-templates</a></h1>
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.testGen" id="apidoc.element.swagger-test-templates.testGen">
        function <span class="apidocSignatureSpan">swagger-test-templates.</span>testGen
        <span class="apidocSignatureSpan">(swagger, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function testGen(swagger, config) {
  var paths = swagger.paths;
  var targets = config.pathName;
  var result = [];
  var output = [];
  var i = 0;
  var source;
  var filename;
  var schemaTemp;
  var environment;
  var ndx = 0;

  config.templatesPath = (config.templatesPath) ? config.templatesPath : path.join(__dirname, &#x27;templates&#x27;);

  swagger = deref(swagger);
  source = fs.readFileSync(path.join(config.templatesPath, &#x27;/schema.handlebars&#x27;), &#x27;utf8&#x27;);
  schemaTemp = handlebars.compile(source, {noEscape: true});
  handlebars.registerPartial(&#x27;schema-partial&#x27;, schemaTemp);
  source = fs.readFileSync(path.join(config.templatesPath, &#x27;/environment.handlebars&#x27;), &#x27;utf8&#x27;);
  environment = handlebars.compile(source, {noEscape: true});
  helpers.setLen(80);

  if (config.maxLen &#x26;&#x26; !isNaN(config.maxLen)) {
    helpers.setLen(config.maxLen);
  }

  if (!targets || targets.length === 0) {
    // builds tests for all paths in API
    _.forEach(paths, function(apipath, pathName) {
      result.push(testGenPath(swagger, pathName, config));
    });
  } else {
    // loops over specified paths from config
    _.forEach(targets, function(target) {
      result.push(testGenPath(swagger, target, config));
    });
  }

  // no specified paths to build, so build all of them
  if (!targets || targets.length === 0) {
    _.forEach(result, function(results) {
      output.push({
        name: &#x27;-test.js&#x27;,
        test: results
      });
    });

    // build file names with paths
    _.forEach(paths, function(apipath, pathName) {
      // for output file name, replace / with -, and truncate the first /
      // eg: /hello/world -&#x3e; hello-world
      filename = sanitize((pathName.replace(/\//g, &#x27;-&#x27;).substring(1))
        + output[i].name);
      // for base path file name, change it to base-path
      if (pathName === &#x27;/&#x27;) {
        filename = &#x27;base-path&#x27; + output[i].name;
      }
      output[i++].name = filename;
    });
  } else {
    // loops over specified paths
    _.forEach(targets, function(target) {
      // for output file name, replace / with -, and truncate the first /
      // eg: /hello/world -&#x3e; hello-world
      filename = sanitize((target.replace(/\//g, &#x27;-&#x27;).substring(1))
        + &#x27;-test.js&#x27;);
      // for base path file name, change it to base-path
      if (target === &#x27;/&#x27;) {
        filename = &#x27;base-path&#x27; + &#x27;-test.js&#x27;;
      }
      output.push({
        name: filename,
        test: result[ndx++]
      });
    });
  }

  if (swagger.securityDefinitions) {
    var keys = Object.keys(swagger.securityDefinitions);

    keys.forEach(function(element, index, array) {
      array[index] = _.snakeCase(element).toUpperCase();
    });
    var data = {envVars: keys};
    var envText = environment(data);

    output.push({
      name: &#x27;.env&#x27;,
      test: envText
    });
  }
  return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  maxLen: 80,
  pathParams: {
    &#x22;id&#x22;: &#x22;0123&#x22;
  }
};

// Generates an array of JavaScript test files following specified configuration
stt.<span class="apidocCodeKeywordSpan">testGen</span>(swagger, config);
```

## API

`swagger-test-templates` module exports a function with following arguments and return values:

### Arguments
...</pre></li>
    </ul>
    
    
    
    
</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.swagger-test-templates.helpers" id="apidoc.module.swagger-test-templates.helpers">module swagger-test-templates.helpers</a></h1>
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.ifCond" id="apidoc.element.swagger-test-templates.helpers.ifCond">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>ifCond
        <span class="apidocSignatureSpan">(v1, v2, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ifCond(v1, v2, options) {
  if (arguments.length &#x3c; 3) {
    throw new Error(&#x27;Handlebars Helper \&#x27;ifCond\&#x27; needs 2 parameters&#x27;);
  }
  if (v1.length &#x3e; 0 || v2) {
    return options.fn(this);
  }
  return options.inverse(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
    
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.is" id="apidoc.element.swagger-test-templates.helpers.is">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>is
        <span class="apidocSignatureSpan">(lvalue, rvalue, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function is(lvalue, rvalue, options) {
  if (arguments.length &#x3c; 3) {
    throw new Error(&#x27;Handlebars Helper \&#x27;is\&#x27; needs 2 parameters&#x27;);
  }

  if (lvalue !== rvalue) {
    return options.inverse(this);
  } else {
    return options.fn(this);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
    
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.length" id="apidoc.element.swagger-test-templates.helpers.length">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>length
        <span class="apidocSignatureSpan">(description)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function length(description) {
  if (arguments.length &#x3c; 2) {
    throw new Error(&#x27;Handlebar Helper \&#x27;length\&#x27;&#x27; +
    &#x27; needs 1 parameter&#x27;);
  }

  if ((typeof description) !== &#x27;string&#x27;) {
    throw new TypeError(&#x27;Handlebars Helper \&#x27;length\&#x27;&#x27; +
      &#x27;requires path to be a string&#x27;);
  }

  if (len === -1) { // toggle off truncation, this is a noop
    return description;
  }

  return strObj(description).truncate(len - 50).s;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
    
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.pathify" id="apidoc.element.swagger-test-templates.helpers.pathify">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>pathify
        <span class="apidocSignatureSpan">(path, pathParams)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pathify(path, pathParams) {
  var r;

  if (arguments.length &#x3c; 3) {
    throw new Error(&#x27;Handlebars Helper \&#x27;pathify\&#x27;&#x27; +
      &#x27; needs 2 parameters&#x27;);
  }

  if ((typeof path) !== &#x27;string&#x27;) {
    throw new TypeError(&#x27;Handlebars Helper \&#x27;pathify\&#x27;&#x27; +
      &#x27;requires path to be a string&#x27;);
  }

  if ((typeof pathParams) !== &#x27;object&#x27;) {
    throw new TypeError(&#x27;Handlebars Helper \&#x27;pathify\&#x27;&#x27; +
      &#x27;requires pathParams to be an object&#x27;);
  }

  if (Object.keys(pathParams).length &#x3e; 0) {
    var re = new RegExp(/(?:\{+)(.*?(?=\}))(?:\}+)/g);
    var re2;
    var matches = [];
    var m = re.exec(path);
    var i;

    while (m) {
      matches.push(m[1]);
      m = re.exec(path);
    }

    for (i = 0; i &#x3c; matches.length; i++) {
      var match = matches[i];

      re2 = new RegExp(&#x27;(\\{+)&#x27; + match + &#x27;(?=\\})(\\}+)&#x27;);

      if (typeof (pathParams[match]) !== &#x27;undefined&#x27; &#x26;&#x26; pathParams[match] !== null) {
        path = path.replace(re2, pathParams[match]);
      } else {
        path = path.replace(re2, &#x27;{&#x27; + match + &#x27; PARAM GOES HERE}&#x27;);
      }
    }
    return path;
  }

  r = new RegExp(/(?:\{+)(.*?(?=\}))(?:\}+)/g);
  return path.replace(r, &#x27;{$1 PARAM GOES HERE}&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
    
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.printJSON" id="apidoc.element.swagger-test-templates.helpers.printJSON">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>printJSON
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function printJSON(data) {
  if (arguments.length &#x3c; 2) {
    throw new Error(&#x27;Handlebar Helper \&#x27;printJSON\&#x27;&#x27; +
    &#x27; needs at least 1 parameter&#x27;);
  }

  if (data !== null) {
    if ((typeof data) === &#x27;string&#x27;) {
      return &#x27;\&#x27;&#x27; + data + &#x27;\&#x27;&#x27;;
    } else if ((typeof data) === &#x27;object&#x27;) {
      return &#x27;{\n&#x27;+prettyPrintJson(data, &#x27;        &#x27;)+&#x27;\n      }&#x27;;
    } else {
      return data;
    }
  } else {
    return null;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
    
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.setLen" id="apidoc.element.swagger-test-templates.helpers.setLen">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>setLen
        <span class="apidocSignatureSpan">(descriptionLength)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setLen(descriptionLength) {
  len = descriptionLength
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

swagger = deref(swagger);
source = fs.readFileSync(path.join(config.templatesPath, &#x27;/schema.handlebars&#x27;), &#x27;utf8&#x27;);
schemaTemp = handlebars.compile(source, {noEscape: true});
handlebars.registerPartial(&#x27;schema-partial&#x27;, schemaTemp);
source = fs.readFileSync(path.join(config.templatesPath, &#x27;/environment.handlebars&#x27;), &#x27;utf8&#x27;);
environment = handlebars.compile(source, {noEscape: true});
helpers.<span class="apidocCodeKeywordSpan">setLen</span>(80);

if (config.maxLen &#x26;&#x26; !isNaN(config.maxLen)) {
  helpers.setLen(config.maxLen);
}

if (!targets || targets.length === 0) {
  // builds tests for all paths in API
...</pre></li>
    </ul>
    
    
    
    <h2>
        <a href="#apidoc.element.swagger-test-templates.helpers.validateResponse" id="apidoc.element.swagger-test-templates.helpers.validateResponse">
        function <span class="apidocSignatureSpan">swagger-test-templates.helpers.</span>validateResponse
        <span class="apidocSignatureSpan">(type, noSchema, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function validateResponse(type, noSchema, options) {
  if (arguments.length &#x3c; 3) {
    throw new Error(&#x27;Handlebars Helper \&#x27;validateResponse\&#x27;&#x27; +
      &#x27;needs 2 parameters&#x27;);
  }

  if (!noSchema &#x26;&#x26; type === TYPE_JSON) {
    return options.fn(this);
  } else {
    return options.inverse(this);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
    
    
</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
